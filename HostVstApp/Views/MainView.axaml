<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="clr-namespace:HostVstApp.ViewModels"
			 xmlns:vc="using:HostVstApp.ValueConverters" FontSize="18"
			 mc:Ignorable="d" 
			 x:Class="HostVstApp.Views.MainView" Padding="0"
			 x:DataType="vm:MainViewModel">

	<Design.DataContext>
		<vm:MainViewModel />
	</Design.DataContext>

	<UserControl.Resources>
		<vc:FileNameConverter x:Key="fileNameConverter"/>
	</UserControl.Resources>

	<UserControl.Styles>
		<Style Selector="Button">
			<Setter Property="Background" Value="Gainsboro"/>
		</Style>

		<Style Selector="ListBoxItem">
			<Setter Property="Height" Value="26"/>
			<Setter Property="Margin" Value="0"/>
			<Setter Property="HorizontalAlignment" Value="Stretch"/>
			<Setter Property="FontSize" Value="18"/>
			<Setter Property="Padding" Value="0"/>
		</Style>
	</UserControl.Styles>


	<DockPanel Margin="5"  >

		<Border BorderBrush="Black" BorderThickness="1" Margin="5" DockPanel.Dock="Top" >
			<DockPanel Background="Beige"  >

				<Button x:Name="PlayTestFileBut" DockPanel.Dock="Right" Margin="0"  HorizontalAlignment="Center" Content="Play test file" Click="BeginPlayBut_Click"/>

				<DockPanel x:Name="SoundPlayDP" DataContext="{Binding MainSoundSource}" >
					<DockPanel DockPanel.Dock="Top" >
						<Slider Value="{Binding Volume}" Minimum="0" Maximum="1" Width="60" DockPanel.Dock="Right" Margin="5, 1" />
						<TextBlock Text="Vol:" DockPanel.Dock="Right" Margin="2, 0" VerticalAlignment="Center" />
						<TextBlock DockPanel.Dock="Left" Text="Soundfile:" VerticalAlignment="Center" />
						<TextBlock DockPanel.Dock="Top" Background="GhostWhite" Text="{Binding SoundFileNameOnly}"  TextWrapping="Wrap" VerticalAlignment="Center" Margin="5, 0" />
					</DockPanel>
				</DockPanel>

			</DockPanel>
		</Border>

		<DockPanel DockPanel.Dock="Top" Background="LightGray">
			<Button Content="Select scan folder" Click="SelectVst3FolderButton_Click" Background="LightCyan" BorderThickness="1" BorderBrush="Black"/>
			<TextBlock VerticalAlignment="Center" Margin="7, 0" Text="{Binding Vst3ScanFolder}" ToolTip.Tip="{Binding Vst3ScanFolder}" />
		</DockPanel>

		<DockPanel Background="DarkGray" DockPanel.Dock="Top" Margin="5" Height="500">

			<ListBox x:Name="Vst3sLV" ItemsSource="{Binding ScannedVsts}" Width="500" DockPanel.Dock="Left" SelectionChanged="ListBox_SelectionChanged"
					 Background="Wheat" BorderBrush="Black" BorderThickness="1" >

				<ListBox.ItemTemplate>
					<DataTemplate>
						<Border BorderBrush="DarkBlue" VerticalAlignment="Stretch" BorderThickness="0, 0, 0, 0.5" CornerRadius="2" Padding="4, 0, 4, 0">
							<Grid ShowGridLines="True">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="6*"/>
									<ColumnDefinition Width="3*"/>
									<ColumnDefinition Width="1*"/>
								</Grid.ColumnDefinitions>
								<TextBlock Text="{Binding VstFileName, Converter={StaticResource fileNameConverter}}" Grid.Column="0" Margin="5, 0, 0, 0" TextAlignment="Left" VerticalAlignment="Center"/>
								<TextBlock Text="{Binding PluginTypeString}" Margin="5, 0, 0, 0"  Grid.Column="1" TextAlignment="Left" VerticalAlignment="Center"/>
								<Button Content="Add" Grid.Column="2" Padding="0" IsVisible="{Binding CanLoadVst}" Click="AddVstButton_Click"  />
								<!--<Button Content="Dispose" Grid.Column="2" Padding="0" IsVisible="{Binding IsVstLoaded}" Click="DisposeVstButton_Click" />-->
							</Grid>
						</Border>
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>

			
			<DockPanel>

				<TextBlock Text="Vst3 chain:" DockPanel.Dock="Top" Margin="2, 2, 0, 0" VerticalAlignment="Center"/>
			
				<ListBox DockPanel.Dock="Top" Height="250" ItemsSource="{Binding ActiveVstList}" SelectionChanged="ActiveVstsLB_SelectionChanged" BorderBrush="Black" BorderThickness="1" Background="LightYellow">

				<ListBox.Styles >
					<Style Selector="ListBoxItem">
						<Setter Property="MinHeight" Value="20"/>
					</Style>
				</ListBox.Styles>

				<ListBox.ItemTemplate>
					<DataTemplate>
						<Border BorderBrush="DarkBlue" VerticalAlignment="Stretch" BorderThickness="0, 0, 0, 0.5" CornerRadius="2" Padding="4, 0, 4, 0">
							<Grid ShowGridLines="True" ColumnDefinitions="6*, 3*, 1.5*, 1*">
								<TextBlock Text="{Binding VstFilePath, Converter={StaticResource fileNameConverter}}" Grid.Column="0" Margin="5, 0, 0, 0" TextAlignment="Left" VerticalAlignment="Center"/>
								<Button Grid.Column="1" Content="Open Ed" Click="ShowVstEditorBut_Click" IsEnabled="{Binding HasEditor}" Padding="4,0"/>
								<CheckBox Grid.Column="2" IsChecked="{Binding IsActive}"/>
								<Button Grid.Column="3" Content="X" Background="Red" Click="DisposeVstButton_Click" Padding="1"/>
							</Grid>
						</Border>
					</DataTemplate>
				</ListBox.ItemTemplate>

			</ListBox>

			<TextBox x:Name="ParamsViewTB" Text="{Binding VstParamText}" IsReadOnly="True" BorderBrush="Black" BorderThickness="1.5">
				
			</TextBox>
		

		</DockPanel>
		

		</DockPanel>

		<TextBox Text="{Binding ErrorText}" Margin="5, 0" Background="Bisque" ScrollViewer.VerticalScrollBarVisibility="Visible" TextChanged="TextBox_TextChanged" />

	</DockPanel>



</UserControl>



